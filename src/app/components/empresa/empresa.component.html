<div class="main">
    <h1>Empresas</h1>
    <div class="container">
        <!-- Botão de criação de nova empresa -->
        <div class="action-buttons">
            <a routerLink="/nova-empresa" class="btn btn-primary">Nova Empresa</a>
            <button id="clear-filters" (click)="clearFilters()">Limpar Filtros</button>
        </div>

        <!-- Seção de busca com filtros -->
        <div class="search-section">
            <div class="filters">
                <input id="search-input" type="text" [(ngModel)]="searchName" (keyup)="searchCompanies()"
                    placeholder="Buscar por nome..." />
                <input id="search-input" type="text" [(ngModel)]="searchCnpj" (keyup)="searchCompanies()"
                    placeholder="Buscar por CNPJ..." />

                <select [(ngModel)]="selectedTipo" (change)="searchCompanies()">
                    <option value="">Tipo de empresa</option>
                    <option value="sede">Sede</option>
                    <option value="filial">Filial</option>
                </select>

            </div>
        </div>

        <!-- Lista de empresas -->
        <div class="company-list" *ngIf="empresas.length > 0">
            <h2>Empresas Sede</h2>
            <table>
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Tipo</th>
                        <th>CNPJ</th>
                        <th>Responsável</th>
                        <th>Email Responsável</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let empresa of empresasFiltradas">
                        <td>{{ empresa.nome }}</td>
                        <td>{{ empresa.tipo }}</td>
                        <td>{{ empresa.cnpj }}</td>
                        <td>{{ empresa.nome_responsavel }}</td>
                        <td>{{ empresa.email_responsavel }}</td>
                        <td>
                            <a [routerLink]="['/detalhes-empresa', empresa.id]">Detalhes</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="empresas.length === 0">
        <p>Nenhuma empresa encontrada.</p>
    </div>
</div>